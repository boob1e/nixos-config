# Source monitor configuration
source = ~/.config/hypr/monitors.conf

# Autostart
exec-once = waybar
exec-once = mako
exec-once = hyprpaper
exec-once = ghostty

env = NIXOS_OZONE_WL,1
env = XCURSOR_THEME,Adwaita
env = XCURSOR_SIZE,24

# NVIDIA-specific environment variables for Prime Offload
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_TYPE,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = NVD_BACKEND,direct
env = AQ_DRM_DEVICES,/dev/dri/card1:/dev/dri/card2

cursor {
  no_hardware_cursors = true
}

input {
  kb_layout = us
  follow_mouse = 1
  touchpad {
    natural_scroll = true
  }
}

general {
  gaps_in = 6
  gaps_out = 12
  border_size = 2
  col.active_border = rgb(33ccff)
  col.inactive_border = rgba(595959aa)
  layout = dwindle
}

decoration {
  rounding = 8

  blur {
    enabled = true
    size = 8
    passes = 2
    new_optimizations = true
  }

  shadow {
    enabled = true
    range = 20
    render_power = 3
  }
}

animations {
  enabled = yes
  bezier = myBezier, 0.05, 0.9, 0.1, 1.05

  animation = windows, 1, 7, myBezier
  animation = windowsOut, 1, 7, default, popin 80%
  animation = border, 1, 10, default
  animation = fade, 1, 7, default
  animation = workspaces, 1, 6, default
}

# Keybind helpers:
# SUPER = main mod key (usually "logo" key)

$mainMod = SUPER

# App launchers
bind = $mainMod, RETURN, exec, ghostty
bind = $mainMod, SPACE, exec, rofi -show drun
bind = $mainMod, B, exec, brave
# Quick settings menus
bind = $mainMod SHIFT, P, exec, rofi-power-menu
bind = $mainMod SHIFT, A, exec, rofi-battery-menu

# Window switching (Alt+Tab)
bind = ALT, TAB, cyclenext,
bind = ALT, TAB, bringactivetotop,

# Window management
bind = $mainMod, Q, killactive,
bind = $mainMod, W, killactive,
bind = $mainMod, F, fullscreen,
bind = $mainMod, E, exec, brave

# Focus movement
bind = $mainMod, H, movefocus, l
bind = $mainMod, L, movefocus, r
bind = $mainMod, K, movefocus, u
bind = $mainMod, J, movefocus, d

# Move windows
bind = $mainMod SHIFT, H, movewindow, l
bind = $mainMod SHIFT, L, movewindow, r
bind = $mainMod SHIFT, K, movewindow, u
bind = $mainMod SHIFT, J, movewindow, d

# Workspaces
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6

bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6

# Move workspace to current monitor
bind = $mainMod SHIFT, M, moveworkspacetomonitor, current current

# Screenshots
bind = , PRINT, exec, grim ~/Pictures/screenshot-$(date +%Y-%m-%d_%H-%M-%S).png
bind = SHIFT, PRINT, exec, grim -g "$(slurp)" ~/Pictures/screenshot-$(date +%Y-%m-%d_%H-%M-%S).png

# Reload / exit Hyprland
bind = $mainMod, C, exec, hyprctl reload
bind = $mainMod SHIFT, C, exit,

misc {
  disable_hyprland_logo = true
}
